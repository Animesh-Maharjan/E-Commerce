{% extends 'base/base.html' %}

{% block title %}Reviews for {{ product.name }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2>Reviews for {{ product.name }}</h2>
    {% if reviews %}
        {% for review in reviews %}
        <div class="card mb-3">
            <div class="card-body">
                <strong>{{ review.customer.username }}</strong> - {{ review.rating }}/5
                <p>{{ review.comment }}</p>

                {% if review.reply %}
                <p><strong>Your reply:</strong> {{ review.reply }}</p>
                {% else %}
                <form method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="review_id" value="{{ review.id }}">
                    <div class="mb-2">
                        <textarea name="reply" class="form-control" placeholder="Reply to this review"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary btn-sm">Reply</button>
                </form>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No reviews yet for this product.</p>
    {% endif %}
</div>
{% endblock %}
